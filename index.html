<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mafia-Registro</title>
  <style>
    /* Seus estilos CSS... */
  </style>
</head>
<body>

<header>
  <h1 style="font-size: 36px;">Mafia Gestao-Registro</h1>
  <button onclick="openTab(event, 'registro')">Registrar Venda</button>
  <button onclick="openTab(event, 'informacoes')">Informações</button>
</header>

<!-- Aba de Registro de Vendas -->
<div id="registro" class="tab">
  <div class="container">
    <h2>Registrar Venda</h2>
    <!-- Formulário de Registro de Vendas -->
    <form id="formRegistroVendas">
      <label for="vendedor">Vendedor:</label>
      <input type="text" id="vendedor" required><br><br>
      <label for="mercadoria">Mercadoria:</label>
      <select id="mercadoria" required>
        <option value="Desert">Desert</option>
        <option value="AK47">AK47</option>
        <option value="Sniper">Sniper</option>
        <option value="Colete">Colete</option>
        <option value="Dinamite">Dinamite</option>
      </select><br><br>
      <label for="quantidade">Quantidade:</label>
      <input type="number" id="quantidade" required><br><br>
      <label for="preco">Preço Negociado:</label>
      <input type="number" id="preco" required><br><br>
      <button type="button" onclick="registrarVenda()">Registrar</button>
    </form>
    <!-- Área para exibir as informações registradas -->
    <div id="areaRegistros">
      <h3>Informações Registradas</h3>
      <table id="tabelaRegistros">
        <tr>
          <th>Vendedor</th>
          <th>Mercadoria</th>
          <th>Quantidade</th>
          <th>Preço Negociado</th>
        </tr>
      </table>
    </div>
    <button onclick="limparRegistros()">Limpar Registros</button>
  </div>
</div>

<!-- Aba de Informações -->
<div id="informacoes" class="tab" style="display: none;">
  <div class="container">
    <h2>Informações</h2>
    <table>
      <tr>
        <th>Mercadoria</th>
        <th>Preço</th>
        <th>Munição</th>
      </tr>
      <tr>
        <td>Desert</td>
        <td>8,000</td>
        <td>20 balas</td>
      </tr>
      <tr>
        <td>AK47</td>
        <td>20,000</td>
        <td>100 balas</td>
      </tr>
      <tr>
        <td>Sniper</td>
        <td>50,000</td>
        <td>20 balas</td>
      </tr>
      <tr>
        <td>Colete</td>
        <td>5,000</td>
        <td>1 unidade</td>
      </tr>
      <tr>
        <td>Dinamite</td>
        <td>10,000</td>
        <td>1 unidade</td>
      </tr>
    </table>
  </div>
</div>

<script>
  // Função para abrir abas...
  // Função para limpar os registros...
  // Função para exibir os registros...
  // Função para registrar uma venda...

  // Função para abrir a conexão com o banco de dados IndexedDB
  function abrirBancoDados() {
    return new Promise((resolve, reject) => {
      const request = window.indexedDB.open('registrosDB', 1);

      request.onerror = function(event) {
        console.error('Erro ao abrir o banco de dados:', event.target.error);
        reject(event.target.error);
      };

      request.onsuccess = function(event) {
        console.log('Banco de dados aberto com sucesso.');
        const db = event.target.result;
        resolve(db);
      };

      request.onupgradeneeded = function(event) {
        const db = event.target.result;
        const objectStore = db.createObjectStore('registros', { keyPath: 'id', autoIncrement: true });
        console.log('Banco de dados atualizado.');
      };
    });
  }

  // Função para adicionar um registro ao banco de dados IndexedDB
  function adicionarRegistroIndexedDB(registro) {
    abrirBancoDados().then(db => {
      const transaction = db.transaction(['registros'], 'readwrite');
      const objectStore = transaction.objectStore('registros');
      const request = objectStore.add(registro);
      
      request.onsuccess = function(event) {
        console.log('Registro adicionado ao banco de dados.');
        exibirRegistros();
      };

      request.onerror = function(event) {
        console.error('Erro ao adicionar registro:', event.target.error);
      };
    }).catch(error => {
      console.error('Erro ao abrir o banco de dados:', error);
    });
  }

  // Função para exibir os registros do banco de dados IndexedDB
  function exibirRegistrosIndexedDB() {
    abrirBancoDados().then(db => {
      const objectStore = db.transaction('registros').objectStore('registros');
      const registros = [];

      objectStore.openCursor().onsuccess = function(event) {
        const cursor = event.target.result;

        if (cursor) {
          registros.push(cursor.value);
          cursor.continue();
        } else {
          exibirRegistros(registros);
        }
      };
    }).catch(error => {
      console.error('Erro ao abrir o banco de dados:', error);
    });
  }

  // Função para limpar os registros do banco de dados IndexedDB
  function limparRegistrosIndexedDB() {
    abrirBancoDados().then(db => {
      const transaction = db.transaction(['registros'], 'readwrite');
      const objectStore = transaction.objectStore('registros');
      const request = objectStore.clear();

      request.onsuccess = function(event) {
        console.log('Registros removidos do banco de dados.');
        exibirRegistros();
      };

      request.onerror = function(event) {
        console.error('Erro ao limpar registros:', event.target.error);
      };
    }).catch(error => {
      console.error('Erro ao abrir o banco de dados:', error);
    });
  }

  // Ao carregar a página, exibe os registros salvos no IndexedDB
  exibirRegistrosIndexedDB();
</script>

</body>
</html>
